{"version":3,"sources":["components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","components/bookstore-service-context/bookstore-services-context.js","services/bookstore-services.js","reducers/index.js","store.js","actions/index.js","components/shopping-cart-table/index.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/cart-page.js","components/hoc/with-bookstore-services.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","utils/copmose.js","components/spinner/index.js","components/spinner/spinner.js","components/book-list/book-list.js","components/book-list/index.js","components/pages/home-page.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/app/index.js","components/app/app.js","index.js"],"names":["ErrorIndicator","className","ErrorBoundry","state","hasError","this","setState","props","children","React","Component","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","BookstoreService","getBooks","Promise","resolve","reject","setTimeout","Math","random","Error","data","id","title","author","price","coverImage","initialState","books","loading","error","cartItems","orderTotal","updateOrderTotal","reduce","accum","item","updateOrder","bookId","quantity","book","find","itemIndex","findIndex","cartItem","newItem","count","updateCartItem","index","slice","updateCartItems","reducer","action","type","payload","store","createStore","applyMiddleware","thunkMiddleware","fetchBooks","bookstoreService","dispatch","then","catch","err","booksError","addedToCart","ShoppingCartTable","connect","items","total","onIncrease","onDecrease","onDelete","map","key","onClick","CartPage","withBookstoreServices","Wrapped","BookListItem","onAddedToCart","src","alt","href","compose","func","mainCopmonent","reduceRight","prevF","f","Spinner","BookList","BookListContainer","ownProps","bindActionCreators","HomePage","ShopHeader","totalPrice","totalItems","to","App","role","path","exact","component","ReactDOM","render","value","document","getElementById"],"mappings":"wWAEeA,ECAQ,WACrB,OACE,yBAAKC,UAAU,yBACb,yBAAKA,UAAU,aACb,4HACA,uBAAGA,UAAU,QAAb,uaCLOC,E,kDCEX,aAAc,IAAD,8BACT,gBACKC,MAAQ,CACTC,UAAU,GAHL,E,gEAQTC,KAAKC,SAAS,CACVF,UAAU,M,+BAKd,OAAGC,KAAKF,MAAMC,SACH,kBAAE,EAAF,MAGJC,KAAKE,MAAMC,a,GAnBgBC,IAAMC,W,ECE5CD,IAAME,gBAFIC,E,EAAVC,SACUC,E,EAAVC,SCFiBC,E,kDACjB,aAAc,IAAD,8BACT,gBAoHJC,SAAW,WACT,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACNC,KAAKC,SAAW,IACjBH,EAAO,IAAII,MAAM,uBAEjBL,EAAQ,EAAKM,QAEd,SA3HH,EAAKA,KAAO,CACV,CACEC,GAAI,EACJC,MAAO,iCACPC,OAAQ,kBACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,EACJC,MAAO,cACPC,OAAQ,oBACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,EACJC,MAAO,4DACPC,OAAQ,4BACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,EACJC,MAAO,8GACPC,OAAQ,gBACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,EACJC,MAAO,mCACPC,OAAQ,yCACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,EACJC,MAAO,sCACPC,OAAQ,eACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,EACJC,MAAO,8CACPC,OAAQ,eACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,EACJC,MAAO,yCACPC,OAAQ,eACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,EACJC,MAAO,qCACPC,OAAQ,eACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,GACJC,MAAO,kCACPC,OAAQ,eACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,GACJC,MAAO,gCACPC,OAAQ,eACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,GACJC,MAAO,kEACPC,OAAQ,8BACRC,MAAO,GACPC,WAAY,4FAEd,CACEJ,GAAI,GACJC,MAAO,iFACPC,OAAQ,eACRC,MAAO,GACPC,WAAY,4FAEd,CACAJ,GAAI,GACJC,MAAO,eACPC,OAAQ,iBACRC,MAAO,GACPC,WAAY,kEAEZ,CACEJ,GAAI,GACJC,MAAO,mBACPC,OAAQ,eACRC,MAAO,GACPC,WAAY,kEAEd,CACEJ,GAAI,GACJC,MAAO,kBACPC,OAAQ,sBACRC,MAAO,GACPC,WAAY,mEAjHP,E,UAD6BrB,IAAMC,W,8BCF9CqB,EAAe,CACjBC,MAAO,GACPC,SAAS,EACTC,MAAO,KACPC,UAAW,GACXC,WAAY,GAGVC,EAAmB,SAACF,GACtB,OAAOA,EAAUG,QAAO,SAACC,EAAOC,GAC5B,OAAOD,EAAOC,EAAKX,QACpB,IAoCDY,EAAc,SAACtC,EAAOuC,EAAQC,GAChC,IAAMC,EAAOzC,EAAM6B,MAAMa,MAAK,SAACD,GAAD,OAAUA,EAAKlB,KAAOgB,KAC9CI,EAAY3C,EAAMgC,UAAUY,WAAU,SAACC,GAAD,OAAcA,EAAStB,KAAOgB,KAGpEO,EAtCa,SAACL,GAAoC,IAA9BJ,EAA6B,uDAAxB,GAAWG,EAAa,yCACEH,EAAlDd,UADgD,MAC7CkB,EAAKlB,GADwC,IACEc,EAAtCb,aADoC,MAC9BiB,EAAKjB,MADyB,IACEa,EAApBU,aADkB,MACZ,EADY,IACEV,EAAXX,aADS,MACH,EADG,EAEnD,MAAO,CACHH,KACAC,QACAuB,MAAOA,EAAQP,EACfd,MAAOA,EAAQc,EAASC,EAAKf,OAgCrBsB,CAAeP,EAFlBzC,EAAMgC,UAAUW,GAEcA,EAAWH,GAChDR,EA7Bc,SAACA,EAAWK,EAAMY,GACtC,OAAkB,IAAfZ,EAAKU,MACE,GAAN,mBACOf,EAAUkB,MAAM,EAAGD,IAD1B,YAEOjB,EAAUkB,MAAMD,EAAS,MAItB,IAAXA,EACO,GAAN,mBACOjB,GADP,CAEIK,IAIF,GAAN,mBACOL,EAAUkB,MAAM,EAAGD,IAD1B,CAEIZ,GAFJ,YAGOL,EAAUkB,MAAMD,EAAS,KAWdE,CAAgBnD,EAAMgC,UAAWc,EAASH,GAE5D,OAAO,2BACA3C,GADP,IAEIgC,UAAWA,EACXC,WAAYC,EAAiBF,MAwCtBoB,EApCC,WAAmC,IAAlCpD,EAAiC,uDAAzB4B,EAAcyB,EAAW,uCAE9C,OAAOA,EAAOC,MACV,IAAK,sBACD,OAAO,2BACAtD,GADP,IAEI8B,SAAS,EACTC,MAAO,OAEf,IAAK,sBACD,OAAO,2BACA/B,GADP,IAEI6B,MAAOwB,EAAOE,QACdzB,SAAS,EACTC,MAAO,OAEf,IAAK,sBACD,OAAO,2BACA/B,GADP,IAEI6B,MAAO,GACPC,SAAS,EACTC,MAAOsB,EAAOE,UAEtB,IAAK,qBACD,OAAOjB,EAAYtC,EAAOqD,EAAOE,QAAS,GAC9C,IAAK,yBACD,OAAOjB,EAAYtC,EAAOqD,EAAOE,SAAU,GAC/C,IAAK,8BACD,IAAMhB,EAASc,EAAOE,QAChBlB,EAAOrC,EAAMgC,UAAUU,MAAK,SAACD,GAAD,OAAUA,EAAKlB,KAAOgB,KACxD,OAAOD,EAAYtC,EAAOqD,EAAOE,SAAUlB,EAAKU,OACpD,QACA,OAAO/C,ICzFAwD,EADDC,YAAYL,EAASM,YAAgBC,M,OCgB7CC,EAAa,SAACC,GAAD,OAAsB,kBAAM,SAACC,GAC5CA,EAbO,CACHR,KAAM,wBAaVO,EACK/C,WACAiD,MAAK,SAACzC,GAAD,OAAUwC,EAvBb,CACHR,KAAM,sBACNC,QAqBqCjC,OACpC0C,OAAM,SAACC,GAAD,OAASH,EAZL,SAACG,GAChB,MAAO,CACHX,KAAM,sBACNC,QAASU,GASgBC,CAAWD,UAGtCE,EAAc,SAAC5B,GACjB,MAAO,CACHe,KAAM,qBACNC,QAAShB,IC7BF6B,G,MCoFAC,aArBS,SAACrE,GACrB,MAAM,CACFsE,MAAOtE,EAAMgC,UACbuC,MAAOvE,EAAMiC,eAIM,SAAC6B,GACxB,MAAM,CACFU,WAAY,SAACjD,GACTuC,EAASK,EAAY5C,KAEzBkD,WAAY,SAAClD,GACTuC,EF1CD,CACLR,KAAM,yBACNC,QEwCmChC,KAEjCmD,SAAU,SAACnD,GACPuC,EFtCD,CACLR,KAAM,8BACNC,QEoCuChC,QAK9B8C,EA9EW,SAAC,GAAsD,IAArDC,EAAoD,EAApDA,MAAOC,EAA6C,EAA7CA,MAAOC,EAAsC,EAAtCA,WAAYC,EAA0B,EAA1BA,WAAYC,EAAc,EAAdA,SAgC9D,OACI,yBAAK5E,UAAU,uBACX,0CACC,2BAAOA,UAAU,SACd,+BACI,4BACI,iCACA,oCACA,qCACA,qCACA,wCAGR,+BACKwE,EAAMK,KA7CL,SAACtC,EAAMY,GAAW,IACzB1B,EAA2Bc,EAA3Bd,GAAIC,EAAuBa,EAAvBb,MAAOuB,EAAgBV,EAAhBU,MAAOrB,EAASW,EAATX,MACzB,OACI,wBAAIkD,IAAKrD,GACL,4BAAK0B,EAAQ,GACb,4BAAKzB,GACL,4BAAKuB,GACL,gCAAMrB,GACN,4BACI,4BACI5B,UAAU,4CACV+E,QAAS,WAAOH,EAASnD,KAEzB,uBAAGzB,UAAU,mBAEjB,4BACIA,UAAU,6CACV+E,QAAS,kBAAML,EAAWjD,KAE1B,uBAAGzB,UAAU,uBAEjB,4BACIA,UAAU,6CACV+E,QAAS,WAAOJ,EAAWlD,KAE3B,uBAAGzB,UAAU,+BAuBzB,yBAAKA,UAAU,SAAf,WACayE,QC/CVO,EARE,WACb,OACI,6BACI,kBAAC,EAAD,QCWGC,EAde,kBAAM,SAACC,GACjC,OAAO,SAAC5E,GACJ,OACI,kBAACO,EAAD,MAEQ,SAACkD,GACG,OAAQ,kBAACmB,EAAD,iBAAa5E,EAAb,CAAoByD,iBAAkBA,WCPvDoB,G,MCEM,SAAC,GAA2B,IAA1BxC,EAAyB,EAAzBA,KAAMyC,EAAmB,EAAnBA,cAClB1D,EAAoCiB,EAApCjB,MAAOC,EAA6BgB,EAA7BhB,OAAQC,EAAqBe,EAArBf,MAAOC,EAAcc,EAAdd,WAC7B,OACI,yBAAK7B,UAAU,kBACX,yBAAKA,UAAU,cACX,yBAAKqF,IAAKxD,EAAYyD,IAAI,gBAE9B,yBAAKtF,UAAU,gBACX,0BAAMuF,KAAK,IAAIvF,UAAU,cAAc0B,GACvC,yBAAK1B,UAAU,eAAe2B,GAC9B,yBAAK3B,UAAU,cAAf,IAA8B4B,GAC9B,4BACI5B,UAAU,2BACV+E,QAASK,GAFb,mBCRDI,EANC,sCAAIC,EAAJ,yBAAIA,EAAJ,uBAAa,SAACC,GAC1B,OAAOD,EAAKE,aAAY,SAACC,EAAOC,GAC5B,OAAOA,EAAED,KACVF,KCFQI,G,MCEC,WACZ,OACI,yBAAK9F,UAAU,eACX,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,iCCJN+F,G,MAAW,SAAC,GAA4B,IAA3BhE,EAA0B,EAA1BA,MAAOqD,EAAmB,EAAnBA,cACtB,OACI,wBAAIpF,UAAU,aAEN+B,EAAM8C,KAAI,SAAClC,GACP,OACI,wBAAImC,IAAKnC,EAAKlB,IACV,kBAAC,EAAD,CACIkB,KAAMA,EACNyC,cAAe,kBAAMA,EAAczC,EAAKlB,OAE5C,wBAAIzB,UAAU,wBASpCgG,E,kLAEE5F,KAAKE,MAAMwD,e,+BAGN,IAAD,EAC2C1D,KAAKE,MAA7CyB,EADH,EACGA,MAAOC,EADV,EACUA,QAASC,EADnB,EACmBA,MAAOmD,EAD1B,EAC0BA,cAE9B,OAAGpD,EAEK,yBAAKhC,UAAU,eACX,kBAAC,EAAD,OAKTiC,EACQ,kBAAC,EAAD,MAGJ,kBAAC,EAAD,CAAUF,MAAOA,EAAOqD,cAAeA,Q,GApBtB5E,IAAMC,WChCvBsF,ED0EAP,EACXP,IACAV,aApBoB,SAACrE,GACrB,MAAO,CACH6B,MAAO7B,EAAM6B,MACbC,QAAS9B,EAAM8B,QACfC,MAAO/B,EAAM+B,UAIK,SAAC+B,EAAUiC,GAAc,IACxClC,EAAoBkC,EAApBlC,iBACP,OAAQmC,YAAmB,CACvBpC,WAAYA,EAAWC,GACvBqB,cAAef,GACjBL,MAKSwB,CAGbQ,GEpEaG,EARE,WACb,OACI,6BACI,kBAAC,EAAD,QCJGC,G,MC0BA7B,aAPS,SAACrE,GACrB,MAAM,CACFgC,UAAWhC,EAAMgC,UACjBmE,WAAYnG,EAAMiC,cAIXoC,EAtBI,SAAC,GAA6B,IAA5BrC,EAA2B,EAA3BA,UAAWmE,EAAgB,EAAhBA,WACtBC,EAAapE,EAAUG,QAAO,SAACC,EAAOC,GACxC,OAAOD,EAAOC,EAAKU,QACpB,GACH,OACI,4BAAQjD,UAAU,mBACd,kBAAC,IAAD,CAAMuG,GAAG,IAAIvG,UAAU,kBAAvB,WACA,kBAAC,IAAD,CAAOuG,GAAG,QAAQvG,UAAU,iBACxB,uBAAGA,UAAU,kCACZsG,EAFL,YAE0BD,EAF1B,UCXGG,G,MCKH,WACR,OACI,0BAAMC,KAAK,OAAOzG,UAAU,aACxB,kBAAE,EAAF,MACA,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAO0G,KAAK,IAAIC,OAAK,EAACC,UAAWT,IACjC,kBAAC,IAAD,CAAOO,KAAK,QAAQE,UAAW5B,QCFzCjB,EAAmB,IAAIhD,EAE7B8F,IAASC,OACL,kBAAC,IAAD,CAAUpD,MAAOA,GACf,kBAAC,EAAD,KACE,kBAAC/C,EAAD,CAA0BoG,MAAOhD,GAC/B,kBAAC,IAAD,KACE,kBAAC,EAAD,UAKRiD,SAASC,eAAe,W","file":"static/js/main.d53307ec.chunk.js","sourcesContent":["import ErrorIndicator from './error-indicator'\r\n\r\nexport default ErrorIndicator","import React from 'react';\r\n\r\nconst ErrorIndicator = () => {\r\n  return(\r\n    <div className=\"jumbotron text-center\">\r\n      <div className=\"container\">\r\n        <h2>Произошла ошибка!</h2>\r\n        <p className=\"lead\">В приложении \"ReStore\" произошла ошибка. Перезагрузите приложение или попробуйте поже.</p>\r\n      </div>\r\n  </div>\r\n  )\r\n};\r\n\r\nexport default ErrorIndicator;","import ErrorBoundry from './error-boundry'\r\n\r\nexport default ErrorBoundry","import React from 'react'\r\nimport ErrorIndicator from '../error-indicator/index'\r\n\r\nexport default class ErrorBoundry extends React.Component{\r\n    constructor(){\r\n        super()\r\n        this.state = {\r\n            hasError: false\r\n        }\r\n    }\r\n\r\n    componentDidCatch(){\r\n        this.setState({\r\n            hasError: true\r\n        })\r\n    }\r\n\r\n    render(){\r\n        if(this.state.hasError){\r\n            return < ErrorIndicator/>\r\n        }\r\n\r\n        return this.props.children\r\n    }\r\n}","import React from 'react';\r\n\r\nconst {\r\n    Provider: BookstoreServiceProvider,\r\n    Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    BookstoreServiceProvider,\r\n    BookstoreServiceConsumer\r\n} ","import React from 'react'\r\n\r\nexport default class BookstoreService extends React.Component{\r\n    constructor(){\r\n        super()\r\n        this.data = [\r\n          {\r\n            id: 1,\r\n            title: 'Production-Ready Microservices',\r\n            author: 'Susan J. Fowler',\r\n            price: 32,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 2,\r\n            title: 'Release It!',\r\n            author: 'Michael T. Nygard',\r\n            price: 45,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 3,\r\n            title: 'Learning React: Modern Patterns for Developing React Apps',\r\n            author: 'Alex Banks & Eve Porcello',\r\n            price: 39,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51Kwaw5nInL._SX379_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 4,\r\n            title: 'JavaScript Everywhere: Building Cross-Platform Applications with GraphQL, React, React Native, and Electron',\r\n            author: 'Adam D. Scott',\r\n            price: 29,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51sLoT+bdsL._SX379_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 5,\r\n            title: 'Secrets of the JavaScript Ninja ',\r\n            author: 'John Resig, Bear Bibeault, Josip Maras',\r\n            price: 26,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51u9Pg4riRL._SX397_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 6,\r\n            title: \"You Don't Know JS: Scope & Closures\",\r\n            author: 'Kyle Simpson',\r\n            price: 17,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41ultdqyvXL._SX331_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 7,\r\n            title: \"You Don't Know JS: this & Object Prototypes\",\r\n            author: 'Kyle Simpson',\r\n            price: 17,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41MZdroe73L._SX331_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 8,\r\n            title: \"You Don't Know JS: Async & Performance\",\r\n            author: 'Kyle Simpson',\r\n            price: 17,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51Kb27EcNPL._SX331_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 9,\r\n            title: \"You Don't Know JS: Types & Grammar\",\r\n            author: 'Kyle Simpson',\r\n            price: 17,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51AV-M7-u9L._SX331_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 10,\r\n            title: \"You Don't Know JS: ES6 & Beyond\",\r\n            author: 'Kyle Simpson',\r\n            price: 17,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/410+tmN-P+L._SX331_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 11,\r\n            title: \"You Don't Know JS: Up & Going\",\r\n            author: 'Kyle Simpson',\r\n            price: 17,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41kn-mEpe6L._SX331_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 12,\r\n            title: 'Learning React: Functional Web Development with React and Redux',\r\n            author: 'by Alex Banks, Eve Porcello',\r\n            price: 45,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51FHuacxYjL._SX379_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n            id: 13,\r\n            title: 'Learn React Hooks: Build and refactor modern React.js applications using Hooks',\r\n            author: ' Daniel Bugl',\r\n            price: 40,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/512zOgsWmdL._SX404_BO1,204,203,200_.jpg'\r\n          },\r\n          {\r\n          id: 14,\r\n          title: \"CSS in Depth\",\r\n          author: 'Keith J. Grant',\r\n          price: 43,\r\n          coverImage: 'https://m.media-amazon.com/images/I/71aY6kyvvsL._AC_AA180_.jpg'\r\n          },\r\n          {\r\n            id: 15,\r\n            title: \"Redux in Action \",\r\n            author: 'Marc Garreau',\r\n            price: 34,\r\n            coverImage: 'https://m.media-amazon.com/images/I/71cDJw6J2FL._AC_AA180_.jpg'\r\n          },\r\n          {\r\n            id: 16,\r\n            title: 'React in Action',\r\n            author: 'Mark Tielens Thomas',\r\n            price: 35,\r\n            coverImage: 'https://m.media-amazon.com/images/I/71W632wBuWL._AC_AA180_.jpg'\r\n          }\r\n        ];\r\n    }\r\n    getBooks = () => {\r\n      return new Promise((resolve, reject) => {\r\n        setTimeout(() => {\r\n          if(Math.random() > 0.75){\r\n            reject(new Error('Something is wrong'))\r\n          }else{\r\n            resolve(this.data)\r\n          }\r\n        }, 1000)\r\n      })\r\n\r\n    }\r\n  }","const initialState = {\r\n    books: [],\r\n    loading: true,\r\n    error: null,\r\n    cartItems: [],\r\n    orderTotal: 0\r\n}\r\n\r\nconst updateOrderTotal = (cartItems) => {\r\n    return cartItems.reduce((accum, item) => {\r\n        return accum+=item.price\r\n    }, 0)\r\n}\r\n\r\nconst updateCartItem = (book, item={}, index, quantity) => {\r\n    const {id=book.id, title=book.title, count=0, price=0} = item\r\n        return {\r\n            id,\r\n            title,\r\n            count: count + quantity,\r\n            price: price + quantity*book.price\r\n        }   \r\n}\r\n\r\nconst updateCartItems = (cartItems, item, index) => {\r\n    if(item.count === 0){\r\n        return [\r\n            ...cartItems.slice(0, index ),\r\n            ...cartItems.slice(index  + 1)\r\n        ]\r\n    }\r\n\r\n    if(index === -1){\r\n        return [\r\n            ...cartItems,\r\n            item,\r\n        ]\r\n    }\r\n\r\n    return [\r\n        ...cartItems.slice(0, index),\r\n        item,\r\n        ...cartItems.slice(index  + 1)\r\n    ]\r\n\r\n}\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n    const book = state.books.find((book) => book.id === bookId)\r\n    const itemIndex = state.cartItems.findIndex((cartItem) => cartItem.id === bookId)\r\n    const item = state.cartItems[itemIndex]\r\n\r\n    const newItem = updateCartItem(book, item, itemIndex, quantity)\r\n    const cartItems = updateCartItems(state.cartItems, newItem, itemIndex)\r\n\r\n    return {\r\n        ...state,\r\n        cartItems: cartItems,\r\n        orderTotal: updateOrderTotal(cartItems)\r\n    }\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n\r\n    switch(action.type){\r\n        case 'FETCH_BOOKS_REQUEST':\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                error: null\r\n            }\r\n        case 'FETCH_BOOKS_SUCCESS':\r\n            return {\r\n                ...state,\r\n                books: action.payload,\r\n                loading: false,\r\n                error: null\r\n            }\r\n        case 'FETCH_BOOKS_FAILURL':\r\n            return {\r\n                ...state,\r\n                books: [],\r\n                loading: false,\r\n                error: action.payload\r\n            }\r\n        case 'BOOK_ADDED_TO_CART':\r\n            return updateOrder(state, action.payload, 1)\r\n        case 'BOOK_REMOVED_FROM_CART':\r\n            return updateOrder(state, action.payload, -1)\r\n        case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n            const bookId = action.payload\r\n            const item = state.cartItems.find((book) => book.id === bookId)\r\n            return updateOrder(state, action.payload, -item.count)\r\n        default:\r\n        return state\r\n    }\r\n}\r\n\r\nexport default reducer","import {createStore, compose, applyMiddleware} from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport reducer from './reducers/index'\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunkMiddleware))\r\nexport default store","const booksLoaded = (newBooks) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_SUCCESS',\r\n        payload: newBooks\r\n    }\r\n}\r\n\r\nconst booksRequested = () => {\r\n    return {\r\n        type: 'FETCH_BOOKS_REQUEST',\r\n    }\r\n}\r\n\r\nconst booksError = (err) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_FAILURL',\r\n        payload: err\r\n    }\r\n}\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) =>{\r\n    dispatch(booksRequested())\r\n    bookstoreService\r\n        .getBooks()\r\n        .then((data) => dispatch(booksLoaded(data)))\r\n        .catch((err) => dispatch(booksError(err)))\r\n}\r\n\r\nconst addedToCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_ADDED_TO_CART',\r\n        payload: bookId\r\n    }\r\n}\r\n\r\nconst bookRemovedFromCart = (bookId) => {\r\n    return {\r\n      type: 'BOOK_REMOVED_FROM_CART',\r\n      payload: bookId\r\n    };\r\n};\r\n\r\nconst allBooksRemovedFromCart = (bookId) => {\r\n    return {\r\n      type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n      payload: bookId\r\n    };\r\n};\r\n\r\nexport{\r\n    booksLoaded,\r\n    booksRequested,\r\n    booksError,\r\n    fetchBooks,\r\n    addedToCart,\r\n    bookRemovedFromCart,\r\n    allBooksRemovedFromCart\r\n}","import ShoppingCartTable from './shopping-cart-table'\r\n\r\nexport default ShoppingCartTable","import React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {bookRemovedFromCart, \r\n        allBooksRemovedFromCart, \r\n        addedToCart} from '../../actions/index'\r\n\r\nimport './shopping-cart-table.css'\r\n\r\nconst ShoppingCartTable = ({items, total, onIncrease, onDecrease, onDelete}) => {\r\n    const renderRow = (item, index) => {\r\n        const {id, title, count, price} = item\r\n        return(\r\n            <tr key={id}>\r\n                <td>{index + 1}</td>\r\n                <td>{title}</td>\r\n                <td>{count}</td>\r\n                <td>${price}</td>\r\n                <td>\r\n                    <button \r\n                        className=\"btn btn-outline-danger btn-sm float-right\"\r\n                        onClick={() => {onDelete(id)}}\r\n                    >\r\n                        <i className=\"fa fa-trash-o\" />\r\n                    </button>\r\n                    <button \r\n                        className=\"btn btn-outline-success btn-sm float-right\"\r\n                        onClick={() => onIncrease(id)}\r\n                    >\r\n                        <i className=\"fa fa-plus-circle\" />\r\n                    </button>\r\n                    <button \r\n                        className=\"btn btn-outline-warning btn-sm float-right\"\r\n                        onClick={() => {onDecrease(id)}}\r\n                    >\r\n                        <i className=\"fa fa-minus-circle\" />\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    }\r\n    return (\r\n        <div className=\"shopping-cart-table\">\r\n            <h2>Your order</h2>\r\n             <table className=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th>Item</th>\r\n                        <th>Count</th>\r\n                        <th>Price</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {items.map(renderRow)}\r\n                </tbody>\r\n            </table>\r\n            <div className=\"total\">\r\n                Total: ${total}\r\n            </div>\r\n        </div>\r\n \r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return{\r\n        items: state.cartItems,\r\n        total: state.orderTotal\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return{\r\n        onIncrease: (id) => {\r\n            dispatch(addedToCart(id))\r\n        },\r\n        onDecrease: (id) => {\r\n            dispatch(bookRemovedFromCart(id))\r\n        },\r\n        onDelete: (id) => {\r\n            dispatch(allBooksRemovedFromCart(id))\r\n        },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable)","import React from 'react'\r\nimport ShoppingCartTable from '../shopping-cart-table/index'\r\n\r\nconst CartPage = () => {\r\n    return (\r\n        <div>\r\n            <ShoppingCartTable />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CartPage","import React from 'react';\r\nimport {BookstoreServiceConsumer} from '../bookstore-service-context/index';\r\n\r\nconst withBookstoreServices = () => (Wrapped) =>{\r\n    return (props) =>{\r\n        return(\r\n            <BookstoreServiceConsumer>\r\n                {\r\n                    (bookstoreService) => {\r\n                        return (<Wrapped {...props} bookstoreService={bookstoreService} />)\r\n                    }\r\n                }\r\n            </BookstoreServiceConsumer>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withBookstoreServices","import BookListItem from './book-list-item'\r\n\r\nexport default BookListItem","import React from 'react'\r\n\r\nimport './book-list-item.css'\r\n\r\nconst BookListItem = ({book, onAddedToCart}) => {\r\n    const {title, author, price, coverImage} = book\r\n    return(\r\n        <div className=\"book-list-item\">\r\n            <div className=\"book-cover\">\r\n                <img src={coverImage} alt=\"Book cover\"/>\r\n            </div>\r\n            <div className=\"book-details\">\r\n                <span href=\"#\" className=\"book-title\">{title}</span>\r\n                <div className=\"book-author\">{author}</div>\r\n                <div className=\"book-price\">${price}</div>\r\n                <button \r\n                    className=\"btn btn-info add-to-cart\"\r\n                    onClick={onAddedToCart}\r\n                >\r\n                    Add to cart\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BookListItem","\r\nconst compose = (...func) => (mainCopmonent) =>{\r\n    return func.reduceRight((prevF, f) => {\r\n        return f(prevF)\r\n    }, mainCopmonent)\r\n} \r\n\r\nexport default compose","import Spinner from './spinner'\r\n\r\nexport default Spinner","import React from 'react'\r\n\r\nimport './spinner.css'\r\n\r\nconst Spinner = () => {\r\n    return (\r\n        <div className=\"lds-spinner\">\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n        </div>\r\n    )\r\n}\r\nexport default Spinner\r\n\r\n","import React from 'react'\r\nimport {bindActionCreators} from 'redux'\r\nimport {connect} from 'react-redux'\r\nimport {withBookstoreServices} from '../hoc/index'\r\nimport BookListItem from '../book-list-item/index'\r\nimport {fetchBooks, \r\n        addedToCart\r\n    }  from '../../actions/index'\r\nimport {compose} from '../../utils/index'\r\nimport Spinner from '../spinner/index'\r\nimport ErrorIndicator from '../error-indicator/index'\r\n\r\nimport './book-list.css'\r\n\r\nconst BookList = ({books, onAddedToCart}) => {\r\n    return (\r\n        <ul className=\"book-list\">\r\n            {\r\n                books.map((book) => {\r\n                    return (\r\n                        <li key={book.id}>\r\n                            <BookListItem \r\n                                book={book} \r\n                                onAddedToCart={() => onAddedToCart(book.id)}\r\n                            />\r\n                            <hr className=\"item-divider\"></hr>\r\n                        </li>\r\n                    )\r\n                })\r\n            }\r\n        </ul>\r\n    )\r\n}\r\n\r\nclass BookListContainer extends React.Component{\r\n    componentDidMount(){\r\n        this.props.fetchBooks()\r\n    }\r\n\r\n    render(){\r\n        const {books, loading, error, onAddedToCart} = this.props\r\n\r\n        if(loading){\r\n            return(\r\n                <div className=\"text-center\">\r\n                    <Spinner />\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if(error){\r\n            return <ErrorIndicator />\r\n        }\r\n\r\n        return <BookList books={books} onAddedToCart={onAddedToCart}/>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) =>{\r\n    return {\r\n        books: state.books,\r\n        loading: state.loading,\r\n        error: state.error\r\n    }\r\n}\r\n\r\nconst mapDipatchToProps = (dispatch, ownProps) => {\r\n    const {bookstoreService} = ownProps\r\n    return  bindActionCreators({\r\n        fetchBooks: fetchBooks(bookstoreService), \r\n        onAddedToCart: addedToCart\r\n    },dispatch)\r\n}\r\n\r\n// Old realization\r\n// export default withBookstoreServices()(connect(mapStateToProps, mapDipatchToProps)(BookList))\r\nexport default compose(\r\n    withBookstoreServices(),\r\n    connect(mapStateToProps, mapDipatchToProps)\r\n)(BookListContainer)\r\n","import BookList from './book-list'\r\n\r\nexport default BookList","import React from 'react'\r\nimport BookList from '../book-list/index'\r\n\r\nconst HomePage = () => {\r\n    return (\r\n        <div>\r\n            <BookList />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomePage","import ShopHeader from './shop-header'\r\n\r\nexport default ShopHeader","import React from 'react' \r\nimport {Link} from \"react-router-dom\"\r\nimport {connect} from 'react-redux'\r\n\r\nimport './shop-header.css'\r\n\r\nconst ShopHeader = ({cartItems, totalPrice}) => {\r\n    const totalItems = cartItems.reduce((accum, item) => {\r\n        return accum+=item.count\r\n    }, 0)\r\n    return(\r\n        <header className=\"row shop-header\">\r\n            <Link to=\"/\" className=\"logo text-dark\">ReStore</Link>\r\n            <Link  to=\"/cart\" className=\"shopping-cart\"> \r\n                <i className=\"cart-icon fa fa-shopping-cart\" />\r\n                {totalItems} items (${totalPrice})\r\n            </Link>\r\n        </header>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return{\r\n        cartItems: state.cartItems,\r\n        totalPrice: state.orderTotal,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ShopHeader)","import App from './app'\r\n\r\nexport default App","import React from 'react'\r\nimport {Route, Switch} from 'react-router-dom'\r\nimport {HomePage, CartPage} from '../pages/index'\r\nimport ShopHeader from '../shop-header/index'\r\n\r\nimport './app.css'\r\n\r\nconst App = () => {\r\n    return (\r\n        <main role=\"main\" className=\"container\">\r\n            < ShopHeader />\r\n            <Switch>\r\n                <Route path=\"/\" exact component={HomePage}/>\r\n                <Route path=\"/cart\" component={CartPage}/>\r\n            </Switch>\r\n        </main>\r\n    )\r\n};\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {Provider} from 'react-redux'\nimport {BrowserRouter as Router } from 'react-router-dom'\n\nimport ErrorBoundry from './components/error-boundry/index'\nimport {BookstoreServiceProvider} from './components/bookstore-service-context/index'\nimport BookstoreService from './services/bookstore-services'\nimport store from './store'\nimport App from './components/app/index';\n\nconst bookstoreService = new BookstoreService()\n\nReactDOM.render(\n    <Provider store={store}>\n      <ErrorBoundry>\n        <BookstoreServiceProvider value={bookstoreService}>\n          <Router>\n            <App />\n          </Router>\n        </BookstoreServiceProvider>\n      </ErrorBoundry>\n    </Provider>,\n    document.getElementById('root')\n  );\n"],"sourceRoot":""}